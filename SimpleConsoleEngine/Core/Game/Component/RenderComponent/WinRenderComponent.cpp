#include "stdafx.h"
#include "WinRenderComponent.h"
#include "../../../Console/Coord.h"
#include "../../../Console/Shape.h"
SCE_USE

/////////////////////////////////////////////////////////////////////////////////////////
struct WinRenderComponent::impl
{
    impl(const CompositeRef& _owner) noexcept
        : owner{ _owner }
        , isShow{ true }
        , depth{}
        , coord{}
        , shape{}
    {
    }

    CompositeRef    owner;
    bool            isShow;
    BYTE            depth;
    Coord           coord;
    Shape           shape;
};

/////////////////////////////////////////////////////////////////////////////////////////
WinRenderComponent::WinRenderComponent(const CompositeRef& _owner) noexcept
    : pimpl{ std::make_unique<impl>(_owner) }
{
}

/////////////////////////////////////////////////////////////////////////////////////////
WinRenderComponent::~WinRenderComponent()
{
}

/////////////////////////////////////////////////////////////////////////////////////////
std::string WinRenderComponent::GetComponentName() const
{
    return CONVERT_STRING(WinRenderComponent);
}

/////////////////////////////////////////////////////////////////////////////////////////
IComponent::CompositePtr WinRenderComponent::GetOwner() const
{
    return pimpl->owner.lock();
}

/////////////////////////////////////////////////////////////////////////////////////////
IRenderComponent::RenderType WinRenderComponent::GetRenderType() const
{
    return RenderType::Window;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::Render()
{
    if (pimpl->isShow)
    {
        pimpl->shape.Render(pimpl->coord, pimpl->depth);
    }
}

/////////////////////////////////////////////////////////////////////////////////////////
bool WinRenderComponent::IsShow() const noexcept
{
    return pimpl->isShow;
}

/////////////////////////////////////////////////////////////////////////////////////////
BYTE WinRenderComponent::GetDepth() const noexcept
{
    return pimpl->depth;
}

/////////////////////////////////////////////////////////////////////////////////////////
const Coord& WinRenderComponent::GetCoord() const noexcept
{
    return pimpl->coord;
}

/////////////////////////////////////////////////////////////////////////////////////////
const Shape& WinRenderComponent::GetShape() const noexcept
{
    return pimpl->shape;
}

/////////////////////////////////////////////////////////////////////////////////////////
wchar_t WinRenderComponent::GetForm() const noexcept
{
    return pimpl->shape.form;
}

/////////////////////////////////////////////////////////////////////////////////////////
Color WinRenderComponent::GetColor() const noexcept
{
    return pimpl->shape.color;
}

/////////////////////////////////////////////////////////////////////////////////////////
Color WinRenderComponent::GetBGColor() const noexcept
{
    return pimpl->shape.bgColor;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetShow(bool _isShow) noexcept
{
    pimpl->isShow = _isShow;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetDepth(BYTE _depth) noexcept
{
    pimpl->depth = _depth;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetCoord(const Coord& _coord) noexcept
{
    pimpl->coord = _coord;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetCoord(short _x, short _y) noexcept
{
    pimpl->coord.x = _x;
    pimpl->coord.y = _y;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetShape(const Shape& _shape) noexcept
{
    pimpl->shape = _shape;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetShape(wchar_t _form) noexcept
{
    pimpl->shape.form = _form;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetColor(Color _color) noexcept
{
    pimpl->shape.color = _color;
}

/////////////////////////////////////////////////////////////////////////////////////////
void WinRenderComponent::SetBGColor(Color _bgColor) noexcept
{
    pimpl->shape.bgColor = _bgColor;
}
